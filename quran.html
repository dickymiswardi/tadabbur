<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Mushaf Viewer</title>
  <style>
    @font-face {
      font-family: 'QuranOthmani';
      src: url('fonts/QCF_P602.ttf') format('truetype');
      font-display: swap;
    }

    body {
      background: #f5f5f5;
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }

    .verse-container {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: inline-block;
    }

    .arabic {
      font-family: 'QuranOthmani', serif;
      font-size: 48px;
      line-height: 1.8;
      color: #000;
    }

    .page-number {
      margin-top: 20px;
      font-size: 18px;
      color: #555;
    }

    /* Optional: wrap rasm symbols */
    sup.rasm-symbol {
      font-size: 0.6em;
      vertical-align: top;
      color: #888;
    }

    sup.rasm-symbol-special {
      color: #c00;
    }
  </style>
</head>
<body>

  <div class="verse-container">
    <div id="verse" class="arabic">Loading...</div>
    <div id="page" class="page-number"></div>
  </div>

  <script>
    const surah = 110;
    const ayat = 3;

    function wrapRasmSymbols(text) {
      return text.replace(/([ۭۛۢۖۚۗۙۘۜ])/g, function(match) {
        if (match === 'ۢ' || match === 'ۭ') {
          return '<sup class="rasm-symbol rasm-symbol-special">' + match + '</sup>';
        } else {
          return '<sup class="rasm-symbol">' + match + '</sup>';
        }
      });
    }

    async function loadVerse() {
      const url = `https://api.quran.com/api/v4/verses/by_key/${surah}:${ayat}?words=false&fields=text_uthmani,v1_page`;
      const res = await fetch(url);
      const json = await res.json();
      const verse = json.verse;

      const wrappedText = wrapRasmSymbols(verse.text_uthmani);
      document.getElementById('verse').innerHTML = wrappedText;
      document.getElementById('page').innerText = `Halaman Mushaf: ${verse.v1_page}`;
    }

    loadVerse();
  </script>

</body>
</html>
