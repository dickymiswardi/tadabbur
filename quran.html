<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Mushaf Viewer Dinamis ðŸ“Œ</title>
  <style>
    body {
      font-family: 'Times New Roman', serif;
      text-align: center;
      padding: 40px;
      background-color: #fdfdfd;
    }

    h1 {
      font-size: 2em;
      font-weight: bold;
    }

    #quran-text {
      font-size: 2.5em;
      margin: 20px 0;
      direction: rtl;
    }

    #page-info {
      margin-top: 10px;
      font-style: italic;
      color: #444;
    }
  </style>
</head>
<body>
  <h1>ðŸ“Œ Mushaf Viewer Dinamis</h1>
  <div id="quran-text">Memuat ayat...</div>
  <div id="page-info"></div>

  <script>
    const surah = 108;
    const ayat = 3;
    const apiUrl = `https://api.quran.com/api/v4/verses/by_key/${surah}:${ayat}?fields=text_uthmani,page_number`;

    const quranTextEl = document.getElementById("quran-text");
    const pageInfoEl = document.getElementById("page-info");

    fetch(apiUrl)
      .then(res => res.json())
      .then(data => {
        const verse = data.verse;
        if (!verse) throw new Error("Ayat tidak ditemukan");

        const text = verse.text_uthmani;
        const page = verse.page_number;
        if (!page) throw new Error("Nomor halaman tidak ditemukan");

        const fontUrl = `fonts/QCF_P${String(page).padStart(3, '0')}.TTF`;

        const fontFace = new FontFace("QCF", `url(${fontUrl})`);
        fontFace.load().then(loadedFont => {
          document.fonts.add(loadedFont);
          quranTextEl.style.fontFamily = "QCF";
          quranTextEl.textContent = text;
          pageInfoEl.textContent = `Halaman Mushaf: ${page}`;
        }).catch(() => {
          quranTextEl.textContent = text;
          pageInfoEl.textContent = `Font tidak tersedia untuk halaman ${page}`;
        });
      })
      .catch(err => {
        quranTextEl.textContent = "Gagal memuat: " + err.message;
        pageInfoEl.textContent = "";
      });
  </script>
</body>
</html>
